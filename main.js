!function(){"use strict";class e{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e,t){const n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e,e.validationMessage):this._showInputError(e,e.validationMessage)}_getInvalidInput(e){return e.some((e=>!e.validity.valid))}disableSubmitButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_toggleButtonState(e){this._getInvalidInput(e)?this.disableSubmitButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._buttonElement)}))}))}enableValidation(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t,n){this._name=e.name,this._link=e.link,this._template=t,this._handleCardClick=n}_getTemplate(){return this._template.querySelector(".elements__element").cloneNode(!0)}_handleLikeImage(){this._cardElement.querySelector(".elements__heart").classList.toggle("elements__heart_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_addEventListeners(){this._cardElement.querySelector(".elements__heart").addEventListener("click",(()=>{this._handleLikeImage()})),this._cardElement.querySelector(".elements__trash").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".elements__image").addEventListener("click",(()=>{this._handleCardClick(this._link,this._name)}))}render(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".elements__text").textContent=this._name,this._cardElement.querySelector(".elements__image").style.backgroundImage="url(".concat(this._link,")"),this._addEventListeners(),this._cardElement}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e){n(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),n(this,"_handleOverlayClose",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__image-wrapper"))&&this.close()})),this._popup=e}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleOverlayClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleOverlayClose)}setEventListeners(){this._popup.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()}))}}class i extends s{constructor(e,t){var n,s;super(e),s=e=>this._handleFormSubmit(this._getInputValues()),(n="handleFormSubmit")in this?Object.defineProperty(this,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[n]=s,this._handleFormSubmit=t,this._form=this._popup.querySelector(".form"),this._inputFieldValues={},this._inputList=[...this._form.querySelectorAll(".form__input")]}_getInputValues(){return this._inputList.forEach((e=>{this._inputFieldValues[e.name]=e.value})),this._inputFieldValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this.handleFormSubmit)}close(){super.close(),this._form.reset()}}const r=document.querySelector(".modal_type_edit-profile"),o=document.querySelector(".modal_type_add-place"),l=document.querySelector(".modal_type_preview-image"),a=document.querySelector(".form-add-place"),c=document.querySelector(".form-profile"),u=document.querySelector(".profile__name"),_=document.querySelector(".profile__title"),d=document.querySelector(".form__input_type_name"),m=document.querySelector(".form__input_type_job"),h=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),E=document.querySelector(".elements__list"),b=document.querySelector(".elements-template").content,v={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};function y(e){const n=new t(e,b,f);E.prepend(n.render())}function f(e,t){S.open(e,t)}new class{constructor(e,t){let{items:n,renderer:s}=e;this._itemsRendered=n,this._renderer=s,this._container=t}renderer(){this._itemsRendered.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:y},b).renderer();const S=new class extends s{constructor(e){super(e)}open(e,t){super.open(),this._link=e,this._name=t,this._popup.querySelector(".modal__image-caption").textContent=this._name;const n=this._popup.querySelector(".modal__image-container");n.src=this._link,n.alt=this._name}}(l);S.setEventListeners();const L=new i(o,(function(e){y({name:e.place,link:e.link}),L.close(),C.disableSubmitButton()}));L.setEventListeners();const g=new class{constructor(e){let{userNameElement:t,userJobElement:n}=e;this._userNameElement=t,this._userJobElement=n}getUserInfo(){return this._userData={name:this._userNameElement.textContent,job:this._userJobElement.textContent},this._userData}setUserInfo(e){let{inputName:t,inputJob:n}=e;this._userNameElement.textContent=t,this._userJobElement.textContent=n}}({userNameElement:u,userJobElement:_}),k=new i(r,(function(e){g.setUserInfo({inputName:e.name,inputJob:e.job}),k.close(),q.disableSubmitButton()}));k.setEventListeners();const C=new e(v,a);C.enableValidation();const q=new e(v,c);q.enableValidation(),h.addEventListener("click",(()=>{!function(){const e=g.getUserInfo();d.value=e.name,m.value=e.job}(),k.open()})),p.addEventListener("click",(()=>{L.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WSxDQUNmL0UsS0FBTWhELEtBQUs0SCxpQkFBaUJ4RyxZQUM1QjRHLElBQUtoSSxLQUFLNkgsZ0JBQWdCekcsYUFFckJwQixLQUFLK0gsVUFHZEUsWUFBWSxHQUF5QixJQUF6QixVQUFFbEMsRUFBRixTQUFhQyxHQUFZLEVBQ25DaEcsS0FBSzRILGlCQUFpQnhHLFlBQWMyRSxFQUNwQy9GLEtBQUs2SCxnQkFBZ0J6RyxZQUFjNEUsSUpnRFQsQ0FDNUJILGdCQUFpQkEsRUFDakJDLGVBQWdCQSxJQUdab0MsRUFBZSxJQUFJckQsRUFBY1csR0FHdkMsU0FBMkJlLEdBQ3pCb0IsRUFBU00sWUFDUCxDQUFFbEMsVUFBV1EsRUFBS3ZELEtBQU1nRCxTQUFVTyxFQUFLeUIsTUFFekNFLEVBQWEvRCxRQUNiZ0UsRUFBcUJ0Ryx5QkFQdkJxRyxFQUFhdEQsb0JBZ0JiLE1BQU04QyxFQUFxQixJQUFJOUgsRUFBY0UsRUFBVTZGLEdBQ3ZEK0IsRUFBbUJsRixtQkFFbkIsTUFBTTJGLEVBQXVCLElBQUl2SSxFQUFjRSxFQUFVOEYsR0FDekR1QyxFQUFxQjNGLG1CQUdyQnlELEVBQXNCMUQsaUJBQWlCLFNBQVMsTUFiaEQsV0FDRSxNQUFNNkYsRUFBWVQsRUFBU0csY0FDM0IvQixFQUFVVCxNQUFROEMsRUFBVXBGLEtBQzVCZ0QsRUFBU1YsTUFBUThDLEVBQVVKLElBVzNCSyxHQUNBSCxFQUFhM0QsVUFJZjJCLEVBQXVCM0QsaUJBQWlCLFNBQVMsS0FDL0NpRixFQUFjakQsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3NwcmludF84X3dpdGhfd2VicGFjay8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc3ByaW50Xzhfd2l0aF93ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOF93aXRoX3dlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOF93aXRoX3dlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NwcmludF84X3dpdGhfd2VicGFjay8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc3ByaW50Xzhfd2l0aF93ZWJwYWNrLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NwcmludF84X3dpdGhfd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc3ByaW50Xzhfd2l0aF93ZWJwYWNrLy4vc3JjL3V0aWxzL2luaXRpYWxDYXJkcy5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOF93aXRoX3dlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOF93aXRoX3dlYnBhY2svLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihmaWVsZHNldCwgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gZmllbGRzZXQuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGZpZWxkc2V0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBmaWVsZHNldC5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGZpZWxkc2V0LmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZmllbGRzZXQuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cblxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIHZhbGlkYXRpb25NZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG5cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cblxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cblxuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cblxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QpIHtcbiAgICBpZiAodGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cblxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gIHRoaXMuX3RlbXBsYXRlXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19lbGVtZW50XCIpXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUltYWdlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faGVhcnRcIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2hlYXJ0X2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2hlYXJ0XCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUltYWdlKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdHJhc2hcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5lbGVtZW50c19faW1hZ2VcIlxuICAgICkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XG5cbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleTtcbiAgICBpZiAoa2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVPdmVybGF5Q2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoXG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGBtb2RhbF9faW1hZ2Utd3JhcHBlcmApXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dEZpZWxkVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdGhpcy5faW5wdXRGaWVsZFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgcmV0dXJuIHRoaXMuX2lucHV0RmllbGRWYWx1ZXM7XG4gIH1cblxuICBoYW5kbGVGb3JtU3VibWl0ID0gKGUpID0+IHtcblxuICAgIHJldHVybiB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5oYW5kbGVGb3JtU3VibWl0KTtcbiAgfSBcblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufSIsIi8vIHdyYXBwZXIgbW9kYWxzXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfdHlwZV9lZGl0LXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgYWRkTmV3UGxhY2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfdHlwZV9hZGQtcGxhY2VcIik7XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF90eXBlX3ByZXZpZXctaW1hZ2VcIlxuKTtcblxuLy8gd3JhcHBlciBmb3Jtc1xuZXhwb3J0IGNvbnN0IHBsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1hZGQtcGxhY2VcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tcHJvZmlsZVwiKTtcblxuLy8gcHJvZmlsZSBuYW1lIGFuZCBpbmZvOlxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCB1c2VySm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5cbi8vIGlucHV0IGRhdGEgZmllbGRzIGluIGZvcm1zXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX25hbWVcIik7XG5leHBvcnQgY29uc3QgaW5wdXRKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfam9iXCIpO1xuXG4vLyBidXR0b25zXG5leHBvcnQgY29uc3Qgb3BlblByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGROZXdQbGFjZVBvcHVwQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG4vLyBwbGFjZSAtIGVsZW1lbnRzIC0gdGVtcGxhdGVcbmV4cG9ydCBjb25zdCBwbGFjZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlzdFwiKTtcbmV4cG9ydCBjb25zdCBwbGFjZVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50cy10ZW1wbGF0ZVwiKS5jb250ZW50O1xuXG5cbmV4cG9ydCBjb25zdCBmaWVsZHNldCA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcbn07IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IGluaXRpYWxDYXJkcyBmcm9tIFwiLi4vdXRpbHMvaW5pdGlhbENhcmRzLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG5pbXBvcnQge1xuICBlZGl0UHJvZmlsZVBvcHVwLFxuICBhZGROZXdQbGFjZVBvcHVwLFxuICBwcmV2aWV3SW1hZ2VQb3B1cCxcbiAgcGxhY2VGb3JtLFxuICBwcm9maWxlRm9ybSxcbiAgdXNlck5hbWVFbGVtZW50LFxuICB1c2VySm9iRWxlbWVudCxcbiAgaW5wdXROYW1lLFxuICBpbnB1dEpvYixcbiAgb3BlblByb2ZpbGVFZGl0QnV0dG9uLFxuICBhZGROZXdQbGFjZVBvcHVwQnV0dG9uLFxuICBwbGFjZXNMaXN0LFxuICBwbGFjZVRlbXBsYXRlLFxuICBmaWVsZHNldCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5cbmNvbnN0IGVsZW1lbnRzTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcbiAgfSxcbiAgcGxhY2VUZW1wbGF0ZVxuKTtcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBwbGFjZVRlbXBsYXRlLCBoYW5kbGVJbWFnZVByZXZpZXcpO1xuICBwbGFjZXNMaXN0LnByZXBlbmQoY2FyZC5yZW5kZXIoKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlUHJldmlldyhsaW5rLCBuYW1lKSB7XG4gIHByZXZpZXdJbWFnZS5vcGVuKGxpbmssIG5hbWUpO1xufVxuXG5lbGVtZW50c0xpc3QucmVuZGVyZXIoKTtcblxuXG5jb25zdCBwcmV2aWV3SW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocHJldmlld0ltYWdlUG9wdXApO1xucHJldmlld0ltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuY29uc3QgYWRkUGxhY2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZE5ld1BsYWNlUG9wdXAsIHN1Ym1pdE5ld1BsYWNlRm9ybSk7XG5hZGRQbGFjZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIHN1Ym1pdE5ld1BsYWNlRm9ybShkYXRhKSB7XG4gIGNvbnN0IHBsYWNlID0gIHsgbmFtZTogZGF0YS5wbGFjZSwgbGluazogZGF0YS5saW5rIH07XG5cbiAgcmVuZGVyQ2FyZChwbGFjZSk7XG4gIGFkZFBsYWNlUG9wdXAuY2xvc2UoKTtcbiAgcGxhY2VGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbn1cblxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJOYW1lRWxlbWVudDogdXNlck5hbWVFbGVtZW50LFxuICB1c2VySm9iRWxlbWVudDogdXNlckpvYkVsZW1lbnQsXG59KTtcblxuY29uc3QgcHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdFByb2ZpbGVQb3B1cCwgc3VibWl0UHJvZmlsZUZvcm0pO1xucHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIHN1Ym1pdFByb2ZpbGVGb3JtKGRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oXG4gICAgeyBpbnB1dE5hbWU6IGRhdGEubmFtZSwgaW5wdXRKb2I6IGRhdGEuam9iIH1cbiAgKTtcbiAgcHJvZmlsZU1vZGFsLmNsb3NlKCk7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbn1cblxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xuICBjb25zdCBpbnB1dERhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSBpbnB1dERhdGEubmFtZTtcbiAgaW5wdXRKb2IudmFsdWUgPSBpbnB1dERhdGEuam9iO1xufVxuXG5jb25zdCBwbGFjZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmaWVsZHNldCwgcGxhY2VGb3JtKTtcbnBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZmllbGRzZXQsIHByb2ZpbGVGb3JtKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuXG5vcGVuUHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIHByb2ZpbGVNb2RhbC5vcGVuKCk7XG5cbn0pO1xuXG5hZGROZXdQbGFjZVBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZFBsYWNlUG9wdXAub3BlbigpO1xufSk7XG5cblxuXG5cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcbiAgICAgIHRoaXMuX2l0ZW1zUmVuZGVyZWQgPSBpdGVtcztcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuICBcbiAgICByZW5kZXJlcigpIHtcbiAgICAgIHRoaXMuX2l0ZW1zUmVuZGVyZWQucmV2ZXJzZSgpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbiAgfSAgXG5cbiIsIlxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsICBcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCJcbiAgICB9XG4gIF07XG5cblxuICBleHBvcnQgZGVmYXVsdCBpbml0aWFsQ2FyZHM7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgfVxuXG4gIG9wZW4obGluaywgbmFtZSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIGNvbnN0IGltYWdlUHJldmlldyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNvbnRhaW5lclwiKTtcbiAgICBpbWFnZVByZXZpZXcuc3JjID0gdGhpcy5fbGluaztcbiAgICBpbWFnZVByZXZpZXcuYWx0ID0gdGhpcy5fbmFtZTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZUVsZW1lbnQsIHVzZXJKb2JFbGVtZW50IH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSB1c2VyTmFtZUVsZW1lbnQ7XG4gICAgdGhpcy5fdXNlckpvYkVsZW1lbnQgPSB1c2VySm9iRWxlbWVudDtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3VzZXJEYXRhID0ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgaW5wdXROYW1lLCBpbnB1dEpvYiB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXROYW1lO1xuICAgIHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRKb2I7XG4gIH1cbn0iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiZmllbGRzZXQiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfZ2V0SW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiY2FyZERhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImNsb25lTm9kZSIsIl9oYW5kbGVMaWtlSW1hZ2UiLCJfY2FyZEVsZW1lbnQiLCJ0b2dnbGUiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9hZGRFdmVudExpc3RlbmVycyIsInJlbmRlciIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiUG9wdXAiLCJwb3B1cCIsImV2ZW50Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9wb3B1cCIsIm9wZW4iLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVPdmVybGF5Q2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBTZWxlY3RvciIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm0iLCJfaW5wdXRGaWVsZFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImVkaXRQcm9maWxlUG9wdXAiLCJhZGROZXdQbGFjZVBvcHVwIiwicHJldmlld0ltYWdlUG9wdXAiLCJwbGFjZUZvcm0iLCJwcm9maWxlRm9ybSIsInVzZXJOYW1lRWxlbWVudCIsInVzZXJKb2JFbGVtZW50IiwiaW5wdXROYW1lIiwiaW5wdXRKb2IiLCJvcGVuUHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdQbGFjZVBvcHVwQnV0dG9uIiwicGxhY2VzTGlzdCIsInBsYWNlVGVtcGxhdGUiLCJjb250ZW50IiwicmVuZGVyQ2FyZCIsImRhdGEiLCJjYXJkIiwiaGFuZGxlSW1hZ2VQcmV2aWV3IiwicHJlcGVuZCIsInByZXZpZXdJbWFnZSIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXNSZW5kZXJlZCIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZXZlcnNlIiwiZWxlbWVudCIsImFkZEl0ZW0iLCJpbWFnZVByZXZpZXciLCJzcmMiLCJhbHQiLCJhZGRQbGFjZVBvcHVwIiwicGxhY2UiLCJwbGFjZUZvcm1WYWxpZGF0b3IiLCJ1c2VySW5mbyIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsIl91c2VyRGF0YSIsImpvYiIsInNldFVzZXJJbmZvIiwicHJvZmlsZU1vZGFsIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJpbnB1dERhdGEiLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9