!function(){"use strict";class e{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e,t){const n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e,e.validationMessage):this._showInputError(e,e.validationMessage)}_getInvalidInput(e){return e.some((e=>!e.validity.valid))}disableSubmitButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_toggleButtonState(e){this._getInvalidInput(e)?this.disableSubmitButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._buttonElement)}))}))}enableValidation(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t,n){this._name=e.name,this._link=e.link,this._template=t,this._handleCardClick=n}_getTemplate(){return this._template.querySelector(".elements__element").cloneNode(!0)}_handleLikeImage(){this._cardElement.querySelector(".elements__heart").classList.toggle("elements__heart_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_addEventListeners(){this._cardElement.querySelector(".elements__heart").addEventListener("click",(()=>{this._handleLikeImage()})),this._cardElement.querySelector(".elements__trash").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".elements__image").addEventListener("click",(()=>{this._handleCardClick(this._link,this._name)}))}render(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".elements__text").textContent=this._name,this._cardElement.querySelector(".elements__image").style.backgroundImage="url(".concat(this._link,")"),this._addEventListeners(),this._cardElement}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e){n(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),n(this,"_handleOverlayClose",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__image-wrapper"))&&this.close()})),this._popup=e}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleOverlayClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleOverlayClose)}setEventListeners(){this._popup.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()}))}}class i extends s{constructor(e,t){var n,s;super(e),s=e=>this._handleFormSubmit(this._getInputValues()),(n="handleFormSubmit")in this?Object.defineProperty(this,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[n]=s,this._handleFormSubmit=t,this._form=this._popup.querySelector(".form"),this._inputFieldValues={},this._inputList=[...this._form.querySelectorAll(".form__input")]}_getInputValues(){return this._inputList.forEach((e=>{this._inputFieldValues[e.name]=e.value})),this._inputFieldValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this.handleFormSubmit)}close(){super.close(),this._form.reset()}}const r=document.querySelector(".modal_type_edit-profile"),o=document.querySelector(".modal_type_add-place"),l=document.querySelector(".modal_type_preview-image"),a=document.querySelector(".form-add-place"),c=document.querySelector(".form-profile"),u=document.querySelector(".profile__name"),_=document.querySelector(".profile__title"),d=document.querySelector(".form__input_type_name"),m=document.querySelector(".form__input_type_job"),h=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),E=document.querySelector(".elements__list"),b=document.querySelector(".elements-template").content,v={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};function y(e){const n=new t(e,b,S);E.prepend(n.render())}function S(e,t){L.open(e,t)}new class{constructor(e,t){let{items:n,renderer:s}=e;this._itemsRendered=n,this._renderer=s,this._container=t}renderer(){this._itemsRendered.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:y},b).renderer();const L=new class extends s{constructor(e){super(e)}open(e,t){super.open(),this._link=e,this._name=t,this._popup.querySelector(".modal__image-caption").textContent=this._name;const n=this._popup.querySelector(".modal__image-container");n.src=this._link,n.alt=this._name}}(l);L.setEventListeners();const g=new i(o,(function(e){y({name:e.place,link:e.link}),g.close(),q.disableSubmitButton()}));g.setEventListeners();const k=new class{constructor(e){let{userNameElement:t,userJobElement:n}=e;this._userNameElement=t,this._userJobElement=n}getUserInfo(){return this._userData={name:this._userNameElement.textContent,job:this._userJobElement.textContent},this._userData}setUserInfo(e){let{inputName:t,inputJob:n}=e;this._userNameElement.textContent=t,this._userJobElement.textContent=n}}({userNameElement:u,userJobElement:_}),C=new i(r,(function(e){k.setUserInfo({inputName:e.name,inputJob:e.job}),C.close(),w.disableSubmitButton()}));C.setEventListeners();const q=new e(v,a);q.enableValidation();const w=new e(v,c);w.enableValidation(),h.addEventListener("click",(()=>{!function(){const e=k.getUserInfo();d.value=e.name,m.value=e.job}(),C.open()})),p.addEventListener("click",(()=>{g.open()})),f}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WSxDQUNmL0UsS0FBTWhELEtBQUs0SCxpQkFBaUJ4RyxZQUM1QjRHLElBQUtoSSxLQUFLNkgsZ0JBQWdCekcsYUFFckJwQixLQUFLK0gsVUFHZEUsWUFBWSxHQUF5QixJQUF6QixVQUFFbEMsRUFBRixTQUFhQyxHQUFZLEVBQ25DaEcsS0FBSzRILGlCQUFpQnhHLFlBQWMyRSxFQUNwQy9GLEtBQUs2SCxnQkFBZ0J6RyxZQUFjNEUsSUpnRFQsQ0FDNUJILGdCQUFpQkEsRUFDakJDLGVBQWdCQSxJQUdab0MsRUFBZSxJQUFJckQsRUFBY1csR0FHdkMsU0FBMkJlLEdBQ3pCb0IsRUFBU00sWUFDUCxDQUFFbEMsVUFBV1EsRUFBS3ZELEtBQU1nRCxTQUFVTyxFQUFLeUIsTUFFekNFLEVBQWEvRCxRQUNiZ0UsRUFBcUJ0Ryx5QkFQdkJxRyxFQUFhdEQsb0JBZ0JiLE1BQU04QyxFQUFxQixJQUFJOUgsRUFBY0UsRUFBVTZGLEdBQ3ZEK0IsRUFBbUJsRixtQkFFbkIsTUFBTTJGLEVBQXVCLElBQUl2SSxFQUFjRSxFQUFVOEYsR0FDekR1QyxFQUFxQjNGLG1CQUdyQnlELEVBQXNCMUQsaUJBQWlCLFNBQVMsTUFiaEQsV0FDRSxNQUFNNkYsRUFBWVQsRUFBU0csY0FDM0IvQixFQUFVVCxNQUFROEMsRUFBVXBGLEtBQzVCZ0QsRUFBU1YsTUFBUThDLEVBQVVKLElBVzNCSyxHQUNBSCxFQUFhM0QsVUFJZjJCLEVBQXVCM0QsaUJBQWlCLFNBQVMsS0FDL0NpRixFQUFjakQsVUFLaEIrRCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3ByaW50Xzhfd2l0aF93ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOF93aXRoX3dlYnBhY2svLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NwcmludF84X3dpdGhfd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NwcmludF84X3dpdGhfd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc3ByaW50Xzhfd2l0aF93ZWJwYWNrLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOF93aXRoX3dlYnBhY2svLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc3ByaW50Xzhfd2l0aF93ZWJwYWNrLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOF93aXRoX3dlYnBhY2svLi9zcmMvdXRpbHMvaW5pdGlhbENhcmRzLmpzIiwid2VicGFjazovL3NwcmludF84X3dpdGhfd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NwcmludF84X3dpdGhfd2VicGFjay8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZpZWxkc2V0LCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBmaWVsZHNldC5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gZmllbGRzZXQuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGZpZWxkc2V0LmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZmllbGRzZXQuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBmaWVsZHNldC5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuXG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgdmFsaWRhdGlvbk1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IHZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cblxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuXG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgX2dldEludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuXG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuXG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCkge1xuICAgIGlmICh0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiAgdGhpcy5fdGVtcGxhdGVcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2VsZW1lbnRcIilcbiAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSW1hZ2UoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19oZWFydFwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19faGVhcnRfYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faGVhcnRcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSW1hZ2UoKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190cmFzaFwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRzX19pbWFnZVwiXG4gICAgKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcblxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3Qga2V5ID0gZXZlbnQua2V5O1xuICAgIGlmIChrZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZU92ZXJsYXlDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoYG1vZGFsX19pbWFnZS13cmFwcGVyYClcbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0RmllbGRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9pbnB1dEZpZWxkVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICByZXR1cm4gdGhpcy5faW5wdXRGaWVsZFZhbHVlcztcbiAgfVxuXG4gIGhhbmRsZUZvcm1TdWJtaXQgPSAoZSkgPT4ge1xuXG4gICAgcmV0dXJuIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLmhhbmRsZUZvcm1TdWJtaXQpO1xuICB9IFxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59IiwiLy8gd3JhcHBlciBtb2RhbHNcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90eXBlX2VkaXQtcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBhZGROZXdQbGFjZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90eXBlX2FkZC1wbGFjZVwiKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX3R5cGVfcHJldmlldy1pbWFnZVwiXG4pO1xuXG4vLyB3cmFwcGVyIGZvcm1zXG5leHBvcnQgY29uc3QgcGxhY2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWFkZC1wbGFjZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1wcm9maWxlXCIpO1xuXG4vLyBwcm9maWxlIG5hbWUgYW5kIGluZm86XG5leHBvcnQgY29uc3QgdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHVzZXJKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcblxuLy8gaW5wdXQgZGF0YSBmaWVsZHMgaW4gZm9ybXNcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9qb2JcIik7XG5cbi8vIGJ1dHRvbnNcbmV4cG9ydCBjb25zdCBvcGVuUHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZE5ld1BsYWNlUG9wdXBCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbi8vIHBsYWNlIC0gZWxlbWVudHMgLSB0ZW1wbGF0ZVxuZXhwb3J0IGNvbnN0IHBsYWNlc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saXN0XCIpO1xuZXhwb3J0IGNvbnN0IHBsYWNlVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzLXRlbXBsYXRlXCIpLmNvbnRlbnQ7XG5cblxuZXhwb3J0IGNvbnN0IGZpZWxkc2V0ID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxufTsiLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgaW5pdGlhbENhcmRzIGZyb20gXCIuLi91dGlscy9pbml0aWFsQ2FyZHMuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmltcG9ydCB7XG4gIGVkaXRQcm9maWxlUG9wdXAsXG4gIGFkZE5ld1BsYWNlUG9wdXAsXG4gIHByZXZpZXdJbWFnZVBvcHVwLFxuICBwbGFjZUZvcm0sXG4gIHByb2ZpbGVGb3JtLFxuICB1c2VyTmFtZUVsZW1lbnQsXG4gIHVzZXJKb2JFbGVtZW50LFxuICBpbnB1dE5hbWUsXG4gIGlucHV0Sm9iLFxuICBvcGVuUHJvZmlsZUVkaXRCdXR0b24sXG4gIGFkZE5ld1BsYWNlUG9wdXBCdXR0b24sXG4gIHBsYWNlc0xpc3QsXG4gIHBsYWNlVGVtcGxhdGUsXG4gIGZpZWxkc2V0LFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cblxuY29uc3QgZWxlbWVudHNMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBwbGFjZVRlbXBsYXRlXG4pO1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIHBsYWNlVGVtcGxhdGUsIGhhbmRsZUltYWdlUHJldmlldyk7XG4gIHBsYWNlc0xpc3QucHJlcGVuZChjYXJkLnJlbmRlcigpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VQcmV2aWV3KGxpbmssIG5hbWUpIHtcbiAgcHJldmlld0ltYWdlLm9wZW4obGluaywgbmFtZSk7XG59XG5cbmVsZW1lbnRzTGlzdC5yZW5kZXJlcigpO1xuXG5cbmNvbnN0IHByZXZpZXdJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwcmV2aWV3SW1hZ2VQb3B1cCk7XG5wcmV2aWV3SW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG5jb25zdCBhZGRQbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkTmV3UGxhY2VQb3B1cCwgc3VibWl0TmV3UGxhY2VGb3JtKTtcbmFkZFBsYWNlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gc3VibWl0TmV3UGxhY2VGb3JtKGRhdGEpIHtcbiAgY29uc3QgcGxhY2UgPSAgeyBuYW1lOiBkYXRhLnBsYWNlLCBsaW5rOiBkYXRhLmxpbmsgfTtcblxuICByZW5kZXJDYXJkKHBsYWNlKTtcbiAgYWRkUGxhY2VQb3B1cC5jbG9zZSgpO1xuICBwbGFjZUZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufVxuXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVFbGVtZW50OiB1c2VyTmFtZUVsZW1lbnQsXG4gIHVzZXJKb2JFbGVtZW50OiB1c2VySm9iRWxlbWVudCxcbn0pO1xuXG5jb25zdCBwcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShlZGl0UHJvZmlsZVBvcHVwLCBzdWJtaXRQcm9maWxlRm9ybSk7XG5wcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gc3VibWl0UHJvZmlsZUZvcm0oZGF0YSkge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhcbiAgICB7IGlucHV0TmFtZTogZGF0YS5uYW1lLCBpbnB1dEpvYjogZGF0YS5qb2IgfVxuICApO1xuICBwcm9maWxlTW9kYWwuY2xvc2UoKTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufVxuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IGlucHV0RGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IGlucHV0RGF0YS5uYW1lO1xuICBpbnB1dEpvYi52YWx1ZSA9IGlucHV0RGF0YS5qb2I7XG59XG5cbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZpZWxkc2V0LCBwbGFjZUZvcm0pO1xucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmaWVsZHNldCwgcHJvZmlsZUZvcm0pO1xucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5cbm9wZW5Qcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmaWxsUHJvZmlsZUZvcm0oKTtcbiAgcHJvZmlsZU1vZGFsLm9wZW4oKTtcblxufSk7XG5cbmFkZE5ld1BsYWNlUG9wdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkUGxhY2VQb3B1cC5vcGVuKCk7XG59KTtcblxuXG5cbmZcblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcbiAgICAgIHRoaXMuX2l0ZW1zUmVuZGVyZWQgPSBpdGVtcztcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuICBcbiAgICByZW5kZXJlcigpIHtcbiAgICAgIHRoaXMuX2l0ZW1zUmVuZGVyZWQucmV2ZXJzZSgpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbiAgfSAgXG5cbiIsIlxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsICBcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCJcbiAgICB9XG4gIF07XG5cblxuICBleHBvcnQgZGVmYXVsdCBpbml0aWFsQ2FyZHM7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgfVxuXG4gIG9wZW4obGluaywgbmFtZSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIGNvbnN0IGltYWdlUHJldmlldyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNvbnRhaW5lclwiKTtcbiAgICBpbWFnZVByZXZpZXcuc3JjID0gdGhpcy5fbGluaztcbiAgICBpbWFnZVByZXZpZXcuYWx0ID0gdGhpcy5fbmFtZTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZUVsZW1lbnQsIHVzZXJKb2JFbGVtZW50IH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSB1c2VyTmFtZUVsZW1lbnQ7XG4gICAgdGhpcy5fdXNlckpvYkVsZW1lbnQgPSB1c2VySm9iRWxlbWVudDtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3VzZXJEYXRhID0ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgaW5wdXROYW1lLCBpbnB1dEpvYiB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXROYW1lO1xuICAgIHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRKb2I7XG4gIH1cbn0iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiZmllbGRzZXQiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfZ2V0SW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiY2FyZERhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImNsb25lTm9kZSIsIl9oYW5kbGVMaWtlSW1hZ2UiLCJfY2FyZEVsZW1lbnQiLCJ0b2dnbGUiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9hZGRFdmVudExpc3RlbmVycyIsInJlbmRlciIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiUG9wdXAiLCJwb3B1cCIsImV2ZW50Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9wb3B1cCIsIm9wZW4iLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVPdmVybGF5Q2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBTZWxlY3RvciIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm0iLCJfaW5wdXRGaWVsZFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImVkaXRQcm9maWxlUG9wdXAiLCJhZGROZXdQbGFjZVBvcHVwIiwicHJldmlld0ltYWdlUG9wdXAiLCJwbGFjZUZvcm0iLCJwcm9maWxlRm9ybSIsInVzZXJOYW1lRWxlbWVudCIsInVzZXJKb2JFbGVtZW50IiwiaW5wdXROYW1lIiwiaW5wdXRKb2IiLCJvcGVuUHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdQbGFjZVBvcHVwQnV0dG9uIiwicGxhY2VzTGlzdCIsInBsYWNlVGVtcGxhdGUiLCJjb250ZW50IiwicmVuZGVyQ2FyZCIsImRhdGEiLCJjYXJkIiwiaGFuZGxlSW1hZ2VQcmV2aWV3IiwicHJlcGVuZCIsInByZXZpZXdJbWFnZSIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXNSZW5kZXJlZCIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZXZlcnNlIiwiZWxlbWVudCIsImFkZEl0ZW0iLCJpbWFnZVByZXZpZXciLCJzcmMiLCJhbHQiLCJhZGRQbGFjZVBvcHVwIiwicGxhY2UiLCJwbGFjZUZvcm1WYWxpZGF0b3IiLCJ1c2VySW5mbyIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsIl91c2VyRGF0YSIsImpvYiIsInNldFVzZXJJbmZvIiwicHJvZmlsZU1vZGFsIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJpbnB1dERhdGEiLCJmaWxsUHJvZmlsZUZvcm0iLCJmIl0sInNvdXJjZVJvb3QiOiIifQ==